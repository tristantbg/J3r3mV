function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a}function arrayRand(a){var b=a[Math.floor(Math.random()*a.length)];return b}function init(){}var width=$(window).width(),height=$(window).height(),$slidecontainer,$body,$intro,$mouse_nav;$(function(){var a={init:function(){$(window).load(function(){a.deferImages(),$(".loader").fadeOut(300)}),$(window).resize(function(b){a.sizeSet()}),$(document).ready(function(b){$root="/JeremyVitte",$body=b("body"),$intro=b(".intro"),$slidecontainer=b(".content .inner"),$projects=b(".project"),$categories=b("ul .category"),$mouse_nav=b(".mouse_nav"),a.sizeSet();if(b(document).scrollScope(),a.getParameters("filter")){var c=a.getParameters("filter"),d=b('.category[data-filter="'+c+'"]');a.filter(c,d)}History.Adapter.bind(window,"statechange",function(){var c=History.getState();console.log(c);var d=c.data;if("page"==d.type)$slidecontainer.fadeOut(300,function(){a.loadContent(c.url+"/ajax",$slidecontainer)});else if("filter"==d.type){var e=d.filter,f=b('.category[data-filter="'+e+'"]');a.filter(e,f)}else $body.removeClass("page")}),b("body").on("click","[data-target]",function(c){$el=b(this),$parent=$el.parent(),c.preventDefault(),$parent.hasClass("hidden")?a.goIndex():($projects.removeClass("active"),$parent.is(".project")&&$parent.addClass("active"),History.pushState({type:"page"},"Jérémy Vitté | "+$el.data("title"),$el.attr("href")))}),b(".category[data-filter]").bind("click",function(a){$el=b(this);var c=window.location.href.split(/[?#]/)[0],d=$el.data("filter");a.preventDefault(),History.pushState({type:"filter",filter:d},document.getElementsByTagName("title")[0].innerHTML,c+"?filter="+d)}),b("body").on("click",".back-btn",function(b){b.preventDefault(),a.goIndex()}),b(".intro").click(function(a){b(this).addClass("closed")}),b(".project [data-target]").hover(function(){b(this).parent(".project").hasClass("hidden")||$mouse_nav.html(b(this).data("title"))},function(){$mouse_nav.html("")}),b(document).keyup(function(b){27===b.keyCode&&a.goIndex()}),900>=width?a.mobileMenu():(a.scrollEffect(),a.mouseNav(),b(window).scroll(function(c){0==b(window).scrollTop()&&$body.hasClass("page")&&a.goIndex()}))})},getParameters:function(a){var b=null,c=[];return location.search.substr(1).split("&").forEach(function(d){c=d.split("="),c[0]===a&&(b=decodeURIComponent(c[1]))}),b},filter:function(a,b){"all"==a?($categories.removeClass("active"),$projects.removeClass("hidden"),TweenMax.to($projects,.4,{webkitFilter:"blur(0px)",ease:Power1.easeOut})):($categories.removeClass("active"),b.addClass("active"),TweenMax.to($(".project.hidden"),.4,{webkitFilter:"blur(0px)",ease:Power1.easeOut}),$projects.removeClass("hidden"),$targets=$('.project:not([data-filter="'+a+'"])').addClass("hidden"),TweenMax.to($targets,.4,{webkitFilter:"blur(30px)",ease:Power1.easeOut}))},sizeSet:function(){width=$(window).width(),height=$(window).height()},mouseNav:function(){$(window).mousemove(function(a){posX=a.pageX,posY=a.pageY,posX<width/4&&$body.hasClass("page")||posX<width/2&&!$body.hasClass("page")?$(".mouse_nav").css({top:posY+"px",left:posX+20+"px"}):$(".mouse_nav").css({top:posY+"px",left:posX-$mouse_nav.outerWidth()-20+"px"})})},scrollEffect:function(){for(var a=["0%","0%","0%","-100%","50%","100%","-130%"],b=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onLeave"}}),c=new ScrollMagic.Controller({globalSceneOptions:{triggerHook:"onEnter"}}),d=$("#main_menu").css("left"),e=(new TimelineMax).to("#main_menu",0,{x:"-100%",left:"0"}).to("#about",0,{x:"-100%",left:"0"}).to("#main_title",.5,{opacity:"1"}).to("#main_title",.5,{opacity:"0"}).to("#main_menu",.3,{x:"0%",left:d},"-=0.3").to("#about",.3,{x:"0%",left:d},"-=0.3"),f=(new ScrollMagic.Scene({triggerElement:".offset",duration:"100%"}).setTween(e).addTo(b),document.querySelectorAll(".project-img")),g=0;g<f.length;g++)TweenLite.to(f[g],0,{width:rand(60,80)+"%",yPercent:rand(0,50),xPercent:rand(0,50),rotation:rand(-10,10)}),new ScrollMagic.Scene({triggerElement:f[g],duration:rand(100,300)+"%"}).setTween(f[g],{yPercent:arrayRand(a),rotation:rand(-30,30)}).addTo(c)},goIndex:function(){$projects.removeClass("active"),History.pushState({type:"index"},"Jérémy Vitté",window.location.origin+$root)},mobileMenu:function(){},loadContent:function(a,b){$slidecontainer.scrollTop(0),$.ajax({url:a,success:function(a){$(b).html(a),$body.addClass("page"),$slidecontainer.fadeIn(300)}})},deferImages:function(){for(var a=document.getElementsByTagName("img"),b=0;b<a.length;b++)a[b].getAttribute("data-src")&&a[b].setAttribute("src",a[b].getAttribute("data-src"))}};a.init()}),init();
//# sourceMappingURL=app.min.js.map