function rand(a,b){return Math.floor(Math.random()*(b-a+1))+a}function arrayRand(a){var b=a[Math.floor(Math.random()*a.length)];return b}function init(){}var width=$(window).width(),height=$(window).height(),$slider,flkty,flickityFirst=!0,lastCell=!1;$(function(){var a={init:function(){$(window).load(function(){a.deferImages(),$(".loader").fadeOut("fast"),hasher.init()}),$(window).resize(function(a){}),$(document).ready(function(b){function c(c,h){console.log(h),d=hasher.getHashAsArray();var i=b('*[data-target="'+c+'"]');"index"==d[0]&&(null!=h&&f.remove(),e.removeClass("album infos"),null!=$slider&&$slider.flickity("destroy").empty().show()),"infos"==d[0]&&(f.remove(),e.addClass("infos")),"work"==d[0]&&(f.remove(),a.loadContent(i.attr("href")+"/ajax",g),e.addClass("album"))}var d,e=b("body"),f=b(".intro");hasher.changed.add(c),hasher.initialized.add(c),b("[data-target]").bind("click",function(a){$el=b(this),a.preventDefault(),$el.is(".intro")?setTimeout(function(){hasher.setHash($el.data("target"))},1100):hasher.setHash($el.data("target"))}),b(".intro").click(function(a){b(this).addClass("closed")}),b(document).keyup(function(a){27===a.keyCode&&hasher.setHash("index")});var g=b('.container .slider:not(".hover")');b(".main_menu .albums a").hover(function(){var a=b(this).data("target");b('.slider.hover .gallery_cell[data-title="'+a+'"]').removeClass("hidden")},function(){b(".slider.hover .gallery_cell").addClass("hidden")})})},checkLastCell:function(a){a.selectedIndex<a.cells.length-1&&(lastCell=!1),lastCell&&hasher.setHash("index"),a.selectedIndex==a.cells.length-1&&(lastCell=!0)},loadSlider:function(){$slider=$(".slider.albumslider").flickity({cellSelector:".gallery_cell",imagesLoaded:!0,lazyLoad:1,setGallerySize:!1,prevNextButtons:!1,pageDots:!1}),flkty=$slider.data("flickity"),lastCell=!1,flickityFirst&&($slider.on("staticClick",function(b,c,d,e){d&&a.goNext($slider)}),$(".prev").bind("click",function(b){b.preventDefault(),a.goPrev($slider)}),$(".next").bind("click",function(b){b.preventDefault(),a.goNext($slider)}),flickityFirst=!1)},goNext:function(b){b.flickity("next",!1),a.checkLastCell(flkty)},goPrev:function(b){b.flickity("previous",!1),a.checkLastCell(flkty)},loadContent:function(b,c){$.ajax({url:b,success:function(b){$(c).html(b),a.loadSlider()}})},deferImages:function(){for(var a=document.getElementsByTagName("img"),b=0;b<a.length;b++)a[b].getAttribute("data-src")&&a[b].setAttribute("src",a[b].getAttribute("data-src"))}};a.init()}),init();
//# sourceMappingURL=app.min.js.map